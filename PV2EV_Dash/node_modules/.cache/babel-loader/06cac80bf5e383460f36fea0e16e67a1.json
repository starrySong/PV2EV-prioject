{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\songt\\\\PycharmProjects\\\\PV2EV_Dash\\\\src\\\\pages\\\\dashboards\\\\Analytics\\\\MapContainer.js\";\n\nimport React, { useEffect } from 'react';\nvar _window = window,\n    kakao = _window.kakao;\n\nvar MapContainer = function MapContainer(_ref) {\n  var searchPlace = _ref.searchPlace;\n  useEffect(function () {\n    var container = document.getElementById(\"myMap\");\n    var options = {\n      center: new kakao.maps.LatLng(33.450701, 126.570667),\n      level: 3\n    };\n    var map = new kakao.maps.Map(container, options);\n    var markerPosition = new kakao.maps.LatLng(37.365264512305174, 127.10676860117488);\n    var marker = new kakao.maps.Marker({\n      position: markerPosition\n    });\n    var ps = new kakao.maps.services.Places();\n    var mapTypeControl = new kakao.maps.MapTypeControl(); // 지도에 컨트롤을 추가해야 지도위에 표시됩니다\n    // kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다\n\n    map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT); // 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다\n\n    var zoomControl = new kakao.maps.ZoomControl();\n    map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);\n    var drawingFlag = false; // 다각형이 그려지고 있는 상태를 가지고 있을 변수입니다\n\n    var drawingPolygon; // 그려지고 있는 다각형을 표시할 다각형 객체입니다\n\n    var polygon; // 그리기가 종료됐을 때 지도에 표시할 다각형 객체입니다\n\n    var areaOverlay; // 다각형의 면적정보를 표시할 커스텀오버레이 입니다\n\n    ps.keywordSearch(searchPlace, placesSearchCB);\n\n    function placesSearchCB(data, status, pagination) {\n      if (status === kakao.maps.services.Status.OK) {\n        var bounds = new kakao.maps.LatLngBounds();\n\n        for (var i = 0; i < data.length; i++) {\n          displayMarker(data[i]);\n          console.log(data[i]);\n          bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));\n        }\n\n        map.setBounds(bounds);\n      }\n    }\n\n    function displayMarker(place) {\n      var marker = new kakao.maps.Marker({\n        map: map,\n        position: new kakao.maps.LatLng(place.y, place.x)\n      });\n    }\n\n    kakao.maps.event.addListener(map, 'click', function (mouseEvent) {\n      // 마우스로 클릭한 위치입니다\n      var clickPosition = mouseEvent.latLng; // 지도 클릭이벤트가 발생했는데 다각형이 그려지고 있는 상태가 아니면\n\n      if (!drawingFlag) {\n        // 상태를 true로, 다각형을 그리고 있는 상태로 변경합니다\n        drawingFlag = true; // 지도 위에 다각형이 표시되고 있다면 지도에서 제거합니다\n\n        if (polygon) {\n          polygon.setMap(null);\n          polygon = null;\n        } // 지도 위에 면적정보 커스텀오버레이가 표시되고 있다면 지도에서 제거합니다\n\n\n        if (areaOverlay) {\n          areaOverlay.setMap(null);\n          areaOverlay = null;\n        } // 그려지고 있는 다각형을 표시할 다각형을 생성하고 지도에 표시합니다\n\n\n        drawingPolygon = new kakao.maps.Polygon({\n          map: map,\n          // 다각형을 표시할 지도입니다\n          path: [clickPosition],\n          // 다각형을 구성하는 좌표 배열입니다 클릭한 위치를 넣어줍니다\n          strokeWeight: 3,\n          // 선의 두께입니다\n          strokeColor: '#00a0e9',\n          // 선의 색깔입니다\n          strokeOpacity: 1,\n          // 선의 불투명도입니다 0에서 1 사이값이며 0에 가까울수록 투명합니다\n          strokeStyle: 'solid',\n          // 선의 스타일입니다\n          fillColor: '#00a0e9',\n          // 채우기 색깔입니다\n          fillOpacity: 0.2 // 채우기 불투명도입니다\n\n        }); // 그리기가 종료됐을때 지도에 표시할 다각형을 생성합니다\n\n        polygon = new kakao.maps.Polygon({\n          path: [clickPosition],\n          // 다각형을 구성하는 좌표 배열입니다 클릭한 위치를 넣어줍니다\n          strokeWeight: 3,\n          // 선의 두께입니다\n          strokeColor: '#00a0e9',\n          // 선의 색깔입니다\n          strokeOpacity: 1,\n          // 선의 불투명도입니다 0에서 1 사이값이며 0에 가까울수록 투명합니다\n          strokeStyle: 'solid',\n          // 선의 스타일입니다\n          fillColor: '#00a0e9',\n          // 채우기 색깔입니다\n          fillOpacity: 0.2 // 채우기 불투명도입니다\n\n        });\n      } else {\n        // 다각형이 그려지고 있는 상태이면\n        // 그려지고 있는 다각형의 좌표에 클릭위치를 추가합니다\n        // 다각형의 좌표 배열을 얻어옵니다\n        var drawingPath = drawingPolygon.getPath(); // 좌표 배열에 클릭한 위치를 추가하고\n\n        drawingPath.push(clickPosition); // 다시 다각형 좌표 배열을 설정합니다\n\n        drawingPolygon.setPath(drawingPath); // 그리기가 종료됐을때 지도에 표시할 다각형의 좌표에 클릭 위치를 추가합니다\n        // 다각형의 좌표 배열을 얻어옵니다\n\n        var path = polygon.getPath(); // 좌표 배열에 클릭한 위치를 추가하고\n\n        path.push(clickPosition); // 다시 다각형 좌표 배열을 설정합니다\n\n        polygon.setPath(path);\n      }\n    }); // 지도에 마우스무브 이벤트를 등록합니다\n    // 다각형을 그리고있는 상태에서 마우스무브 이벤트가 발생하면 그려질 다각형의 위치를 동적으로 보여주도록 합니다\n\n    kakao.maps.event.addListener(map, 'mousemove', function (mouseEvent) {\n      // 지도 마우스무브 이벤트가 발생했는데 다각형을 그리고있는 상태이면\n      if (drawingFlag) {\n        // 마우스 커서의 현재 위치를 얻어옵니다\n        var mousePosition = mouseEvent.latLng; // 그려지고있는 다각형의 좌표배열을 얻어옵니다\n\n        var path = drawingPolygon.getPath(); // 마우스무브로 추가된 마지막 좌표를 제거합니다\n\n        if (path.length > 1) {\n          path.pop();\n        } // 마우스의 커서 위치를 좌표 배열에 추가합니다\n\n\n        path.push(mousePosition); // 그려지고 있는 다각형의 좌표를 다시 설정합니다\n\n        drawingPolygon.setPath(path);\n      }\n    }); // 지도에 마우스 오른쪽 클릭 이벤트를 등록합니다\n    // 다각형을 그리고있는 상태에서 마우스 오른쪽 클릭 이벤트가 발생하면 그리기를 종료합니다\n\n    kakao.maps.event.addListener(map, 'rightclick', function (mouseEvent) {\n      // 지도 오른쪽 클릭 이벤트가 발생했는데 다각형을 그리고있는 상태이면\n      if (drawingFlag) {\n        // 그려지고있는 다각형을  지도에서 제거합니다\n        drawingPolygon.setMap(null);\n        drawingPolygon = null; // 클릭된 죄표로 그릴 다각형의 좌표배열을 얻어옵니다\n\n        var path = polygon.getPath(); // 다각형을 구성하는 좌표의 개수가 3개 이상이면\n\n        if (path.length > 2) {\n          // 지도에 다각형을 표시합니다\n          polygon.setMap(map);\n          var area = Math.round(polygon.getArea()),\n              // 다각형의 총면적을 계산합니다\n          content = '<div class=\"info\">총면적 <span class=\"number\"> ' + area + '</span> m<sup>2</sup></div>'; // 커스텀오버레이에 추가될 내용입니다\n          // 면적정보를 지도에 표시합니다\n\n          areaOverlay = new kakao.maps.CustomOverlay({\n            map: map,\n            // 커스텀오버레이를 표시할 지도입니다\n            content: content,\n            // 커스텀오버레이에 표시할 내용입니다\n            xAnchor: 0,\n            yAnchor: 0,\n            position: path[path.length - 1] // 커스텀오버레이를 표시할 위치입니다. 위치는 다각형의 마지막 좌표로 설정합니다\n\n          });\n        } else {\n          // 다각형을 구성하는 좌표가 2개 이하이면 다각형을 지도에 표시하지 않습니다\n          polygon = null;\n        } // 상태를 false로, 그리지 않고 있는 상태로 변경합니다\n\n\n        drawingFlag = false;\n      }\n    });\n    marker.setMap(map);\n\n    function setMarkers(map) {\n      for (var i = 0; i < markers.length; i++) {\n        markers[i].setMap(map);\n      }\n    }\n\n    var requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        center: map.getCenter()\n      })\n    };\n    fetch('http://127.0.0.1:5000/map', requestOptions).then(function (response) {\n      response.json().then(function (data) {\n        console.log(data); // json형식 데이터에 접근할 때는 forEach를 사용한다.\n      });\n    });\n  }, [searchPlace]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"myMap\",\n    style: {\n      width: '500px',\n      height: '500px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default MapContainer;","map":{"version":3,"sources":["C:/Users/songt/PycharmProjects/PV2EV_Dash/src/pages/dashboards/Analytics/MapContainer.js"],"names":["React","useEffect","window","kakao","MapContainer","searchPlace","container","document","getElementById","options","center","maps","LatLng","level","map","Map","markerPosition","marker","Marker","position","ps","services","Places","mapTypeControl","MapTypeControl","addControl","ControlPosition","TOPRIGHT","zoomControl","ZoomControl","RIGHT","drawingFlag","drawingPolygon","polygon","areaOverlay","keywordSearch","placesSearchCB","data","status","pagination","Status","OK","bounds","LatLngBounds","i","length","displayMarker","console","log","extend","y","x","setBounds","place","event","addListener","mouseEvent","clickPosition","latLng","setMap","Polygon","path","strokeWeight","strokeColor","strokeOpacity","strokeStyle","fillColor","fillOpacity","drawingPath","getPath","push","setPath","mousePosition","pop","area","Math","round","getArea","content","CustomOverlay","xAnchor","yAnchor","setMarkers","markers","requestOptions","method","headers","body","JSON","stringify","getCenter","fetch","then","response","json","width","height"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\n\r\nconst { kakao } = window;\r\n\r\nconst MapContainer = ({ searchPlace }) => {\r\n  useEffect(() => {\r\n    const container = document.getElementById(\"myMap\");\r\n    const options = {\r\n      center: new kakao.maps.LatLng(33.450701, 126.570667),\r\n      level: 3,\r\n    };\r\n    const map = new kakao.maps.Map(container, options);\r\n    var markerPosition  = new kakao.maps.LatLng(37.365264512305174, 127.10676860117488);\r\n    var marker = new kakao.maps.Marker({\r\n      position: markerPosition\r\n  });\r\n\r\n    const ps = new kakao.maps.services.Places();\r\n    var mapTypeControl = new kakao.maps.MapTypeControl();\r\n\r\n    // 지도에 컨트롤을 추가해야 지도위에 표시됩니다\r\n    // kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다\r\n    map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);\r\n\r\n    // 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다\r\n    var zoomControl = new kakao.maps.ZoomControl();\r\n    map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);\r\n\r\n    var drawingFlag = false; // 다각형이 그려지고 있는 상태를 가지고 있을 변수입니다\r\n    var drawingPolygon; // 그려지고 있는 다각형을 표시할 다각형 객체입니다\r\n    var polygon; // 그리기가 종료됐을 때 지도에 표시할 다각형 객체입니다\r\n    var areaOverlay; // 다각형의 면적정보를 표시할 커스텀오버레이 입니다\r\n\r\n    ps.keywordSearch(searchPlace, placesSearchCB);\r\n\r\n    function placesSearchCB(data, status, pagination) {\r\n      if (status === kakao.maps.services.Status.OK) {\r\n        let bounds = new kakao.maps.LatLngBounds();\r\n\r\n        for (let i = 0; i < data.length; i++) {\r\n          displayMarker(data[i]);\r\n          console.log(data[i])\r\n          bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));\r\n        }\r\n\r\n        map.setBounds(bounds);\r\n      }\r\n    }\r\n\r\n    function displayMarker(place) {\r\n      let marker = new kakao.maps.Marker({\r\n        map: map,\r\n        position: new kakao.maps.LatLng(place.y, place.x),\r\n      });\r\n    }\r\n    kakao.maps.event.addListener(map, 'click', function(mouseEvent) {\r\n\r\n        // 마우스로 클릭한 위치입니다\r\n        var clickPosition = mouseEvent.latLng;\r\n\r\n        // 지도 클릭이벤트가 발생했는데 다각형이 그려지고 있는 상태가 아니면\r\n        if (!drawingFlag) {\r\n\r\n            // 상태를 true로, 다각형을 그리고 있는 상태로 변경합니다\r\n            drawingFlag = true;\r\n\r\n            // 지도 위에 다각형이 표시되고 있다면 지도에서 제거합니다\r\n            if (polygon) {\r\n                polygon.setMap(null);\r\n                polygon = null;\r\n            }\r\n\r\n            // 지도 위에 면적정보 커스텀오버레이가 표시되고 있다면 지도에서 제거합니다\r\n            if (areaOverlay) {\r\n                areaOverlay.setMap(null);\r\n                areaOverlay = null;\r\n            }\r\n\r\n            // 그려지고 있는 다각형을 표시할 다각형을 생성하고 지도에 표시합니다\r\n            drawingPolygon = new kakao.maps.Polygon({\r\n                map: map, // 다각형을 표시할 지도입니다\r\n                path: [clickPosition], // 다각형을 구성하는 좌표 배열입니다 클릭한 위치를 넣어줍니다\r\n                strokeWeight: 3, // 선의 두께입니다\r\n                strokeColor: '#00a0e9', // 선의 색깔입니다\r\n                strokeOpacity: 1, // 선의 불투명도입니다 0에서 1 사이값이며 0에 가까울수록 투명합니다\r\n                strokeStyle: 'solid', // 선의 스타일입니다\r\n                fillColor: '#00a0e9', // 채우기 색깔입니다\r\n                fillOpacity: 0.2 // 채우기 불투명도입니다\r\n            });\r\n\r\n            // 그리기가 종료됐을때 지도에 표시할 다각형을 생성합니다\r\n            polygon = new kakao.maps.Polygon({\r\n                path: [clickPosition], // 다각형을 구성하는 좌표 배열입니다 클릭한 위치를 넣어줍니다\r\n                strokeWeight: 3, // 선의 두께입니다\r\n                strokeColor: '#00a0e9', // 선의 색깔입니다\r\n                strokeOpacity: 1, // 선의 불투명도입니다 0에서 1 사이값이며 0에 가까울수록 투명합니다\r\n                strokeStyle: 'solid', // 선의 스타일입니다\r\n                fillColor: '#00a0e9', // 채우기 색깔입니다\r\n                fillOpacity: 0.2 // 채우기 불투명도입니다\r\n            });\r\n\r\n\r\n        } else { // 다각형이 그려지고 있는 상태이면\r\n\r\n            // 그려지고 있는 다각형의 좌표에 클릭위치를 추가합니다\r\n            // 다각형의 좌표 배열을 얻어옵니다\r\n            var drawingPath = drawingPolygon.getPath();\r\n\r\n            // 좌표 배열에 클릭한 위치를 추가하고\r\n            drawingPath.push(clickPosition);\r\n\r\n            // 다시 다각형 좌표 배열을 설정합니다\r\n            drawingPolygon.setPath(drawingPath);\r\n\r\n\r\n            // 그리기가 종료됐을때 지도에 표시할 다각형의 좌표에 클릭 위치를 추가합니다\r\n            // 다각형의 좌표 배열을 얻어옵니다\r\n            var path = polygon.getPath();\r\n\r\n            // 좌표 배열에 클릭한 위치를 추가하고\r\n            path.push(clickPosition);\r\n\r\n            // 다시 다각형 좌표 배열을 설정합니다\r\n            polygon.setPath(path);\r\n        }\r\n\r\n    });\r\n\r\n    // 지도에 마우스무브 이벤트를 등록합니다\r\n    // 다각형을 그리고있는 상태에서 마우스무브 이벤트가 발생하면 그려질 다각형의 위치를 동적으로 보여주도록 합니다\r\n    kakao.maps.event.addListener(map, 'mousemove', function (mouseEvent) {\r\n\r\n        // 지도 마우스무브 이벤트가 발생했는데 다각형을 그리고있는 상태이면\r\n        if (drawingFlag){\r\n\r\n            // 마우스 커서의 현재 위치를 얻어옵니다\r\n            var mousePosition = mouseEvent.latLng;\r\n\r\n            // 그려지고있는 다각형의 좌표배열을 얻어옵니다\r\n            var path = drawingPolygon.getPath();\r\n\r\n            // 마우스무브로 추가된 마지막 좌표를 제거합니다\r\n            if (path.length > 1) {\r\n                path.pop();\r\n            }\r\n\r\n            // 마우스의 커서 위치를 좌표 배열에 추가합니다\r\n            path.push(mousePosition);\r\n\r\n            // 그려지고 있는 다각형의 좌표를 다시 설정합니다\r\n            drawingPolygon.setPath(path);\r\n        }\r\n    });\r\n\r\n    // 지도에 마우스 오른쪽 클릭 이벤트를 등록합니다\r\n    // 다각형을 그리고있는 상태에서 마우스 오른쪽 클릭 이벤트가 발생하면 그리기를 종료합니다\r\n    kakao.maps.event.addListener(map, 'rightclick', function (mouseEvent) {\r\n\r\n        // 지도 오른쪽 클릭 이벤트가 발생했는데 다각형을 그리고있는 상태이면\r\n        if (drawingFlag) {\r\n\r\n            // 그려지고있는 다각형을  지도에서 제거합니다\r\n            drawingPolygon.setMap(null);\r\n            drawingPolygon = null;\r\n\r\n            // 클릭된 죄표로 그릴 다각형의 좌표배열을 얻어옵니다\r\n            var path = polygon.getPath();\r\n\r\n            // 다각형을 구성하는 좌표의 개수가 3개 이상이면\r\n            if (path.length > 2) {\r\n\r\n                // 지도에 다각형을 표시합니다\r\n                polygon.setMap(map);\r\n\r\n                var area = Math.round(polygon.getArea()), // 다각형의 총면적을 계산합니다\r\n                    content = '<div class=\"info\">총면적 <span class=\"number\"> ' + area + '</span> m<sup>2</sup></div>'; // 커스텀오버레이에 추가될 내용입니다\r\n\r\n                // 면적정보를 지도에 표시합니다\r\n                areaOverlay = new kakao.maps.CustomOverlay({\r\n                    map: map, // 커스텀오버레이를 표시할 지도입니다\r\n                    content: content,  // 커스텀오버레이에 표시할 내용입니다\r\n                    xAnchor: 0,\r\n                    yAnchor: 0,\r\n                    position: path[path.length-1]  // 커스텀오버레이를 표시할 위치입니다. 위치는 다각형의 마지막 좌표로 설정합니다\r\n                });\r\n\r\n\r\n            } else {\r\n\r\n                // 다각형을 구성하는 좌표가 2개 이하이면 다각형을 지도에 표시하지 않습니다\r\n                polygon = null;\r\n            }\r\n\r\n            // 상태를 false로, 그리지 않고 있는 상태로 변경합니다\r\n            drawingFlag = false;\r\n        }\r\n    });\r\n  marker.setMap(map);\r\n  \r\n  function setMarkers(map) {\r\n    for (var i = 0; i < markers.length; i++) {\r\n        markers[i].setMap(map);\r\n    }\r\n}\r\n\r\n  const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({center: map.getCenter()} )\r\n        };\r\n  fetch('http://127.0.0.1:5000/map', requestOptions)\r\n            .then((response) => {\r\n                response.json().then(function(data) {\r\n                    console.log(data)\r\n                // json형식 데이터에 접근할 때는 forEach를 사용한다.\r\n            })\r\n        })\r\n\r\n  }, [searchPlace]);\r\n\r\n    return (\r\n        <div id='myMap' style={{\r\n            width: '500px',\r\n            height: '500px'\r\n        }}></div>\r\n    );\r\n}\r\n\r\nexport default MapContainer;"]},"metadata":{},"sourceType":"module"}